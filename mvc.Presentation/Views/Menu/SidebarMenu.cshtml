@using System.Collections.ObjectModel
@using SR.Entities.BaseEntities.MenuEntities
@model ObservableCollection<Menu>

<aside class="bg-light border-end" id="sidebar-wrapper">
    <div class="sidebar-heading text-center py-4 primary-text fs-4 fw-bold text-uppercase border-bottom">
        <i class="bi bi-lightning-fill me-2"></i>Menú
    </div>
    <div class="list-group list-group-flush my-3">
        @foreach (var item in Model.Where(m => m.Menupadre == null))
        {
            var subMenus = Model.Where(m => m.Menupadre == item.Id).ToList();

            if (subMenus.Any())
            {
                <a class="list-group-item list-group-item-action bg-transparent fw-bold d-flex justify-content-between align-items-center"
                   data-bs-toggle="collapse" href="#submenu-@item.Id" role="button" aria-expanded="false" aria-controls="submenu-@item.Id">
                    <span><i class="@item.Icono me-2"></i>@item.Descipcion</span>
                    <i class="bi bi-chevron-down"></i>
                </a>
                <div class="collapse" id="submenu-@item.Id">
                    <ul class="list-group ms-3">
                        @foreach (var sub in subMenus)
                        {
                            <li class="list-group-item bg-transparent border-0 px-0 py-1">
                                <a class="text-decoration-none text-dark" asp-controller="@sub.Link" asp-action="Index">
                                    <i class="@sub.Icono me-2"></i>@sub.Descipcion
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            }
            else
            {
                <a class="list-group-item list-group-item-action bg-transparent fw-bold"
                   asp-controller="@item.Link" asp-action="Index">
                    <i class="@item.Icono me-2"></i>@item.Descipcion
                </a>
            }
        }
    </div>
</aside>
